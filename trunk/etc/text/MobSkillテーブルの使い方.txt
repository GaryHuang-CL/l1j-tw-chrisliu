MobSkillについて

１．概要
　MobSkillテーブルはNPCが使用する特殊スキルの発動条件と発動される特殊スキルを定義したものです。
　特殊スキルは特殊物理攻撃、魔法攻撃、サモン、強制変身の4種類あります。
　このうち特殊物理攻撃とサモンはMobSkill内へ所定の数値を設定すれば動作します。
　魔法攻撃はL1SkillUseで管理していますので、skillsテーブルのskillidを設定すれば既存魔法については動作します。
　新しく魔法を追加する場合Skillsテーブルへ魔法を追加しなければなりません。

２．NPCの行動順序
　NPCの行動順序の行動順序は以下のようになっており、MobSkillは２の「特殊スキル」で使用されます。
　　１．ターゲットのサーチ→ターゲットがいなければ４へ
　　２．「特殊スキル」を発動→発動すれば１へ
　　３．通常攻撃
　　４．移動

３．発動条件
　発動条件には次の5種類あります。
　　・ランダム（１〜１００％）
　　・現在のHP比率（１〜１００％）
　　・同族NPCのHP比率（１〜１００％）
　　・距離（指定距離以上、以下の両方定義可能）
　　・スキル使用回数

　これらの条件を設定するとAND条件になります。
　0を設定すれば、条件より除外されます。

４．テーブル構造とレコードフォーマット
　NPCのmobidと特殊スキルを実行する順番を決めるactNoでユニークなキーになります。
　いくつか注意事項があります。
　mobid〜TriCountまではスキルの種類によらず、共通して使用しますが
　その他のフィールドは使用スキルの種類により異なります。

　・物理攻撃は以下のフィールドを使用します。
　　　Range〜Levarage、Gfxid、ActId
　・魔法攻撃は以下のフィールドを使用します。
　　　Levarage、SkillId
　・サモンは以下のフィールドを使用します。
　　　SummonId、SummonMin、SummonMax
　・強制変身は以下のフィールドを使用します。
　　　PolyId

　−レコードフォーマット
　1.mobid
　　スキルを使用するNPCのID

　2.actNo
　　スキルを使用した場合、どの順番で実行するかを決める番号
　　必ず0から始め、1ずつ増やす

　3.mobname
　　スキルを使用するNPCの名前

　4.Type
　　スキルのタイプ
　　1:物理攻撃、2：魔法攻撃、3：サモン、4：強制変身

　5.TriRnd
　　スキル発動条件：ランダムな確率（1〜100）

　6.TriHp
　　スキル発動条件：HPが%以下で発動（1〜100）

　7.TriCompanionHp
　　スキル発動条件：同族のHPが%以下で発動（1〜100）
　　このスキルが発動するとターゲットをHP比率が一番少ない同族NPCに変更します。

　8.TriRange
　　スキル発動条件：triRange<0の場合、対象との距離が絶対値(triRange)以下のとき発動
　　　　　　　　　　triRange>0の場合、対象との距離がtriRange以上のとき発動

　9.TriCount
　　スキル発動条件：スキルの発動回数がtriCount以下のとき発動

　10.ChangeTarget
　　スキル発動後、ターゲットを変更する場合に指定します。（未実装）

　11.Range（物理攻撃のみ使用）
　　rangeまでの距離ならば攻撃可能、物理攻撃をするならば近接攻撃の場合でも1以上を設定

　12.AreaWidth（物理攻撃のみ使用）
　　範囲攻撃の横幅、単体攻撃ならば0を設定、範囲攻撃するならば0以上を設定
　　WidthとHeightの設定は攻撃者からみて横幅をWidth、奥行きをHeightとする。
　　Widthは1を指定すれば、ターゲットを中心として左右1までが対象となる。

　13.AreaHeight（物理攻撃のみ使用）
　　範囲攻撃の奥行き、単体攻撃ならば0を設定、範囲攻撃するならば1以上を設定

　14.Leverage（魔法攻撃、物理攻撃で使用）
　　ダメージの倍率、1/10で表す。物理攻撃、魔法攻撃共に有効

　15.SkillId（魔法攻撃のみ使用）
　　魔法を使う場合、skillsテーブルに記載されているskillIdを指定

　16.Gfxid（物理攻撃のみ使用）
　　物理攻撃のモーショングラフィックを指定する場合記入する。
　　例：ドレイクの炎、竜の尻尾・首振り等

　17.ActId（物理攻撃のみ使用）
　　 物理攻撃のグラフィックのアクションID
　　例：オーガの薙ぎ払い、スコーピオンの挟み込み攻撃

　18.SummonId（サモンのみ使用）
　　サモンするモンスターのNPCID

　19.SummonMin（サモンのみ使用）
　　サモンするモンスターの最少数

　20.SummonMax（サモンのみ使用）
　　サモンするモンスターの最大数

　21.PolyId(強制変身のみ使用)
　　強制変身させるID、polymorphsテーブルを参照して下さい。
　　強制変身させる対象は15セル以内にいるPCが対象となります。
　　壁は貫通しません。

余談
　魔法攻撃はskillidのみで、距離や範囲の指定がありません。
　これは魔法攻撃がskillsテーブルにRange〜AreaHeightまでの情報を持たせているため
　mobSkillテーブルに記入する必要がないためです。
　将来、物理攻撃も魔法攻撃と同様な構造になるかもしれませんが、そうなった場合
　こちらで、mobSkillに登録されている物理攻撃情報は移管しますので
　互換性については問題ありません。
